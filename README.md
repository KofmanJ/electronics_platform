# Electronics_Platform

## Онлайн-платформа торговой сети электроники

### Сеть представляет собой иерархическую структуру из трех уровней:
- завод
- розничная сеть
- индивидуальный предприниматель

Каждое звено сети ссылается только на одного поставщика оборудования.
Важно отметить, что уровень иерархии определяется не названием звена, а отношением к остальным элементам сети.
Завод всегда находится на уровне 0, а если розничная сеть относится напрямую к заводу, минуя остальные звенья, ее уровень — 1.

### Каждое звено сети обладает следующими элементами:
- **название**
- **контакты**:
  - email 
  - страна
  - город
  - улица
  - номер дома
- **продукты**:
  - название
  - модель
  - дата выхода продукта на рынок
  - цена
- **поставщик**
- **задолженность перед поставщиком в денежном выражении с точностью до копеек**
- **время создания (заполняется автоматически при создании)**

### Созданные объекты выводятся в админ панели в виде таблицы.
#### Существует возможность создания и редактирования объектов в админ панели.
### На странице объекта сети добавлены:
- ссылка на «Поставщика»
- фильтр по названию города и страны
- admin action, очищающий задолженность перед поставщиком у выбранных объектов

#### Запрет на обновление через API поля «Задолженность перед поставщиком»
#### Права доступа к API настроены так, чтобы только активные сотрудники имели доступ к API.
#### Уровень поставки ('level') выставляется автоматически.

### При создании поставщика функционируют следующие валидации:
- У завода ('network_type') не может быть поставщика ('supplier_name').
- На нулевом уровне поставки ('level') может находиться только завод ('network_type').
- Уровень поставщика должен быть на 1 выше уровня вашего поставщика ('level').
- При выборе типа сети не завод ('network_type') обязательно должен быть поставщик ('supplier_name').
- У завода ('network_type') не может быть задолженности ('debt').
- Тип сети не может быть пустым ('network_type').

#### Установка зависимостей осуществляется с помощью команды: `pip install -r requirements.txt`

#### Для проверки фильтрации поставщика по стране: `http://127.0.0.1:8000/supplier/?contact__country=Australia`
#### Для проверки фильтрации контакта по стране: `http://127.0.0.1:8000/contact/?country=Australia`

### В корневой папке проекта находятся фикстуры:
- **пользователей - users.json**
- **контактов, продуктов и поставщиков - electronics.json**
- **настройки модераторов - moderator_fixture.json**

### Для загрузки фикстур необходимо выполнить команды:
- `python -Xutf8 manage.py loaddata electronics electronics.json`
- `python -Xutf8 manage.py loaddata users users.json`
- `python manage.py loaddata moderator_fixture.json`

### В папке management представлены файлы для создания разных видов пользователей: 
- **обычного (CU)**:
  - python manage.py cu
- **модератора (CMU)**:
  - python manage.py cmu
- **суперюзера(CSU)**:
  - python manage.py csu

#### Команды для создания пользователей с заданными параметрами:
 - `email`=Почта
 - `first_name`=Имя
 - `last_name`=Фамилия
 - `is_superuser`=(True или False) - задает права администратора
 - `is_staff`=(True или False) - задает права модератора
 - `is_active`=(True или False) - задает активность пользователя

#### Поле `user.set_password('password')` задает пароль пользователя. При желании можно задать пароль самостоятельно.
#### Данные email, first_name и last_name нужно указать свои, а поля is_*** оставляем по умолчанию.